<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Convocatorias</title>
</head>
<body>
    <h1>Test Filtro Convocatorias</h1>
    <select id="filterConvocatoria">
        <option value="all">Todas las convocatorias</option>
    </select>
    
    <script>
        async function testConvocatorias() {
            try {
                console.log('üîç Cargando datos...');
                const response = await fetch('data_unificado_con_duplicados.json');
                const data = await response.json();
                
                console.log('üìä Datos cargados:', data);
                console.log('üìÖ Convocatorias:', data.convocatorias ? 'EXISTS' : 'NOT EXISTS');
                
                if (data.convocatorias) {
                    const convocatoriasKeys = Object.keys(data.convocatorias);
                    console.log('üìÖ Convocatorias encontradas:', convocatoriasKeys.length, convocatoriasKeys);
                    
                    const select = document.getElementById('filterConvocatoria');
                    select.innerHTML = '';
                    
                    // A√±adir opci√≥n "Todas"
                    const allOption = document.createElement('option');
                    allOption.value = 'all';
                    allOption.textContent = 'Todas las convocatorias';
                    select.appendChild(allOption);
                    
                    // A√±adir convocatorias
                    convocatoriasKeys.forEach(key => {
                        const option = document.createElement('option');
                        option.value = key;
                        option.textContent = data.convocatorias[key].descripcion;
                        select.appendChild(option);
                        console.log(`  - ${key}: ${data.convocatorias[key].descripcion}`);
                    });
                    
                    console.log(`üìÖ Selector poblado con ${convocatoriasKeys.length} convocatorias`);
                    console.log(`üìÖ Opciones en el select: ${select.options.length}`);
                }
            } catch (error) {
                console.error('‚ùå Error:', error);
            }
        }
        
        // Ejecutar test cuando se carga la p√°gina
        window.addEventListener('load', testConvocatorias);
    </script>
</body>
</html>
