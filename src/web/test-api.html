<!DOCTYPE html>
<html>
<head>
    <title>Test API PostgreSQL</title>
</head>
<body>
    <h1>Test API PostgreSQL</h1>
    <div id="result"></div>

    <script>
    async function testAPI() {
        try {
            console.log('üîÑ Probando API...');
            const response = await fetch('http://localhost:5001/examenes');

            if (!response.ok) {
                throw new Error(`Error HTTP: ${response.status}`);
            }

            const data = await response.json();
            console.log('‚úÖ Datos cargados:', data);
            console.log('üìä Total ex√°menes:', data.count);
            console.log('üìã Primer examen:', data.examenes[0]);

            // Extraer convocatorias √∫nicas
            const convocatorias = [...new Set(data.examenes.map(e => e.convocatoria))].sort().reverse();
            console.log('üìÖ Convocatorias √∫nicas:', convocatorias);

            document.getElementById('result').innerHTML = `
                <h2>Resultado:</h2>
                <p><strong>Total ex√°menes:</strong> ${data.count}</p>
                <p><strong>Convocatorias encontradas:</strong> ${convocatorias.length}</p>
                <ul>
                    ${convocatorias.map(c => `<li>${c}</li>`).join('')}
                </ul>
            `;

        } catch (error) {
            console.error('‚ùå Error:', error);
            document.getElementById('result').innerHTML = `<p style="color: red;">Error: ${error.message}</p>`;
        }
    }

    // Ejecutar al cargar la p√°gina
    testAPI();
    </script>
</body>
</html>